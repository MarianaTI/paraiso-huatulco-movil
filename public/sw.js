(()=>{importScripts("https://storage.googleapis.com/workbox-cdn/releases/6.5.4/workbox-sw.js"),workbox.precaching.precacheAndRoute([{'revision':null,'url':'/'},{'revision':'3e115d9c62686a8427a275d546c04c05','url':'/_next/static/XK4aLD9ftR6CDdttcALEp/_buildManifest.js'},{'revision':'b6652df95db52feb4daf4eca35380933','url':'/_next/static/XK4aLD9ftR6CDdttcALEp/_ssgManifest.js'},{'revision':'4e4209ea0fc171d4','url':'/_next/static/chunks/100.4e4209ea0fc171d4.js'},{'revision':'5ace5d6e67978450','url':'/_next/static/chunks/40-5ace5d6e67978450.js'},{'revision':'268c8c590d7f2802','url':'/_next/static/chunks/57.268c8c590d7f2802.js'},{'revision':'9ada1abd405715db','url':'/_next/static/chunks/7ddb3757-9ada1abd405715db.js'},{'revision':'2f335d22a7318891','url':'/_next/static/chunks/framework-2f335d22a7318891.js'},{'revision':'6489e7a006a1a3fa','url':'/_next/static/chunks/main-6489e7a006a1a3fa.js'},{'revision':'1783e8175744847c','url':'/_next/static/chunks/pages/%5Bid%5D-1783e8175744847c.js'},{'revision':'76b04b3f4b418262','url':'/_next/static/chunks/pages/_app-76b04b3f4b418262.js'},{'revision':'b41dbd85229d9331','url':'/_next/static/chunks/pages/_error-b41dbd85229d9331.js'},{'revision':'700b94835aa1ffc4','url':'/_next/static/chunks/pages/about-us-700b94835aa1ffc4.js'},{'revision':'91c18032155c9253','url':'/_next/static/chunks/pages/booking-91c18032155c9253.js'},{'revision':'2f3bad99edb665b4','url':'/_next/static/chunks/pages/confirmation-2f3bad99edb665b4.js'},{'revision':'b8610d644688f797','url':'/_next/static/chunks/pages/contact-b8610d644688f797.js'},{'revision':'2ff0ed5f522da827','url':'/_next/static/chunks/pages/index-2ff0ed5f522da827.js'},{'revision':'97d065ebc04492b7','url':'/_next/static/chunks/pages/reserva-97d065ebc04492b7.js'},{'revision':'846118c33b2c0e922d7b3a7676f81f6f','url':'/_next/static/chunks/polyfills-42372ed130431b0a.js'},{'revision':'33ce12fd6f11a809','url':'/_next/static/chunks/webpack-33ce12fd6f11a809.js'},{'revision':'8bf87ce97b1b3aba','url':'/_next/static/css/8bf87ce97b1b3aba.css'},{'revision':'fceae4b25e422d80aa2c5f3bbe4b2e9b','url':'/sw.js'}]),self.addEventListener("install",e=>{console.log("[SW] Instalado"),self.skipWaiting()}),self.addEventListener("activate",e=>(console.log("[SW] Activado"),self.clients.claim())),self.addEventListener("sync",o=>{"sync-bookings"===o.tag&&(console.log("[SW] Evento de sincronizaci\xf3n recibido"),o.waitUntil(e()))}),self.addEventListener("message",o=>{o.data&&"force-sync-bookings"===o.data.action&&(console.log("[SW] \uD83D\uDD04 Forzando sincronizaci\xf3n manual"),o.waitUntil(e()))});let e=async()=>{console.log("[SW] Enviando reservas offline al servidor...");let e=await o(),r=e.transaction("reservas","readonly").objectStore("reservas").getAll();r.onsuccess=async()=>{let o=r.result;for(let r of(console.log("[SW] ".concat(o.length," reservas encontradas")),o))try{let o=new FormData;for(let e in r)void 0!==r[e]&&null!==r[e]&&o.append(e,r[e]);(await fetch("https://portaldemo.paraisohuatulco.com/rents/booking",{method:"POST",body:o})).ok?(e.transaction("reservas","readwrite").objectStore("reservas").delete(r.id),console.log("[SW] ✅ Reserva enviada y eliminada: ".concat(r.id))):console.warn("[SW] ⚠️ Error del servidor al reenviar reserva")}catch(e){console.error("[SW] ❌ Error de red:",e)}},r.onerror=()=>{console.error("[SW] ❌ Error al leer reservas de IndexedDB")}},o=async()=>await new Promise((e,o)=>{let r=indexedDB.open("offline-db",1);r.onupgradeneeded=e=>{let o=e.target.result;o.objectStoreNames.contains("reservas")||o.createObjectStore("reservas",{keyPath:"id",autoIncrement:!0})},r.onsuccess=()=>e(r.result),r.onerror=()=>o(r.error)})})();